<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.2/handlebars.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <link href="http://fonts.googleapis.com/css?family=Roboto:100,300" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/printstyle.css" media="print" >

    <style type="text/css">
    @media print {
        header { display: none; }
    }
    </style>
</head>
<body class="container">

<!-- Old Button
<header class="row">
    <input type="file" id="input-file" />
    <button id="run">Run</button>
</header>
-->
<header class="row">
    <h1>Polygon MLS Report Generator</h1>
    <form>
      <div class="form-group">
        <label for="reportName">Report Name</label>
        <input type="text" class="form-control" id="reportNameInput" placeholder="Name">
      </div>
      <div class="form-group">
        <label for="reportAddress">Address</label>
        <input type="text" class="form-control" id="reportAddressInput" placeholder="Address">
      </div>
      <div class="form-group">
        <label for="inputFile">Upload File</label>
        <input type="file" id="input-file">
        <p class="help-block">Upload csv. file from MLS.</p>
      </div>
      <button type="button" class="btn btn-default" id="run">Run</button>
    </form>
</header>


<div id="report"></div>
<script src="js/app.js"></script>


<!-- Sales Table-->
<script id="salesHeading" type="text/x-handlebars-template">
    <div class="row">
        <h5 class="center">{{title}}</h5>
    </div>
</script>
<script id="salesDump" type="text/x-handlebars-template">
    <table class="table table-condensed">
        <thead>
            <tr>
                <th>ADDRESS</th>
                <th>LIST PRICE</th>
                <th>SALE PRICE</th>
                <th>SALE DATE</th>
                <th>AGE</th>
                <th>DOM</th>
                <th>BED</th>
                <th>BATH</th>
                <th>AREA</th>
                <th>$PSF</th>
            </tr>
        </thead>
        <tbody>
            {{#each rows}}
            <tr>
                <td>{{Address}}</td>
                <td>${{"List Price"}}</td>
                <td>${{"Sold Price"}}</td>
                <td>{{"Sold Date"}}</td>
                <td>{{Age}}</td>
                <td>{{"Days On Market"}}</td>
                <td>{{"Tot BR"}}</td>
                <td>{{"Tot Baths"}}</td>
                <td>{{TotFlArea}}</td>
                <td>${{"Sold Price per SqFt"}}</td>
            </tr>
            {{/each}}
        </tbody>
        <tfoot>
            <tr>
                <td>TOTAL</td>
                <td>${{totalListPrice}}</td>
                <td>${{totalSalePrice}}</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{totalArea}}</td>
                <td></td>
            </tr>
            <tr>
                <td>AVERAGE</td>
                <td>${{averageListPrice}}</td>
                <td>${{averageSalePrice}}</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{averageArea}}</td>
                <td>${{averagePSF}}</td>
            </tr>
        </tfoot>
    </table>
</script>

<!-- Listings Table-->
<script id="listingsHeading" type="text/x-handlebars-template">
    <div class="row">
        <h5 class="center">{{title}}</h5>
    </div>
</script>
<script id="listingsDump" type="text/x-handlebars-template">
    <table class="table table-condensed">
        <thead>
            <tr>
                <th>ADDRESS</th>
                <th>LIST PRICE</th>
                <th>AGE</th>
                <th>DOM</th>
                <th>BED</th>
                <th>BATH</th>
                <th>AREA</th>
                <th>$PSF</th>
            </tr>
        </thead>
        <tbody>
            {{#each rows}}
            <tr>
                <td>{{Address}}</td>
                <td>{{"List Price"}}</td>
                <td>{{Age}}</td>
                <td>{{"Days On Market"}}</td>
                <td>{{"Tot BR"}}</td>
                <td>{{"Tot Baths"}}</td>
                <td>{{TotFlArea}}</td>
                <td>${{"Sold Price per SqFt"}}</td>
            </tr>
            {{/each}}
        </tbody>
        <tfoot>
            <tr>
                <td>TOTAL</td>
                <td>${{totalListPrice}}</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{totalArea}}</td>
                <td></td>
            </tr>
            <tr>
                <td>AVERAGE</td>
                <td>${{averageListPrice}}</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{averageArea}}</td>
                <td>${{averagePSF}}</td>
            </tr>
        </tfoot>
    </table>
</script>
<script id="salesHeading" type="text/x-handlebars-template">
<div id="reportHeader">
    <h3>{{reportName}}</h3>
    <h4>{{reportAddress}}</h4>
</div>
</script>
</body>
</html>

